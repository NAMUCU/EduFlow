# PRD (Product Requirements Document)

## 📋 제품 개요

### 제품명
**EduFlow** - AI 기반 학원 운영 자동화 + 맞춤형 학습 플랫폼

### Value Proposition

**통합:**
"우리 제품은 중소형 학원 원장/강사와 그들의 학생·학부모가 내신 시험 준비와 일상 학습 관리에서 AI가 모든 걸 대체하려는 기존 에듀테크보다 선생님의 기존 워크플로우 안에서 조용히 작동하며, 지역/학교별 맥락을 반영하고, 실천 가이드를 제공하는 방식으로 더 잘 문제를 해결한다."

### 핵심 차별화 키워드
| 기존 솔루션의 함정 | 우리의 접근 |
|------------------|-----------|
| 새 플랫폼 강요 | **Zero-Entry**: 기존 도구 안에서 작동 |
| 무한 문제 양산 | **Hyper-Local**: 우리 동네 기출 반영 |
| AI가 선생님 대체 | **Assistant**: 선생님을 더 돋보이게 보조 |
| 숫자 중심 리포트 | **Action Plan**: 실천 가이드 제공 |
| 텍스트 풀이만 | **Visual Feedback**: 직관적 설명 |

---

## 👥 타겟 사용자

### Primary (B2B)
| 우선순위 | 그룹 | 시장규모 | 지불의향 |
|---------|------|---------|---------|
| 🥇 | 중소형 수학학원 원장 (30-100명) | 약 2만 개 | 월 10-30만원 |
| 🥈 | 1인 학원/소규모 과외 선생님 | 약 3-4만 명 | 월 3-8만원 |
| 🥉 | 대형 프랜차이즈 학원 | 약 3천 개 | 월 50-100만원+ |

### Secondary (B2C)
| 우선순위 | 그룹 | 시장규모 | 지불의향 |
|---------|------|---------|---------|
| 🥇 | 중학생 학부모 (성적 중위권) | 약 140만 명 | 월 5-10만원 |
| 🥈 | 초등 고학년 학부모 (선행학습) | 약 80만 명 | 월 10-15만원 |
| 🥉 | 고등학생 (자기주도학습) | 약 130만 명 | 월 3-8만원 |

---

## 🎯 핵심 기능 (MVP)

### Phase 1: 문제 생성 및 배포 시스템

#### F1. AI 문제 자동 생성
- **입력**: 단원, 난이도, 문제 유형, 학교/지역 선택
- **처리**: Gemini 3.0 Pro 기반 생성 → 멀티 LLM 검수 (Gemini/GPT/Claude 선택)
- **출력**: 편집 가능한 문제지 (선생님 커스터마이징)

#### F2. 문자 기반 문제 배포 (Tally 연동)
- 생성된 문제 → 고유 ID 부여
- 학생에게 문자 발송 (문제 링크 + 학생 ID 입력)
- 학생 ID로 응답 매칭

#### F3. 풀이 제출 및 AI 분석
- 학생: 손글씨 풀이 사진 업로드
- Claude Sonnet 4.5로 이미지 인식 + 풀이 과정 분석 + 정리 (한번에 처리)
- PDF 변환 (PDF.co) 후 저장

### Phase 2: 분석 및 피드백 시스템

#### F4. 자동 채점 및 취약점 분석
- 정답 비교 + 풀이 과정 분석
- 학생별 취약 단원/개념 도출
- **Action Plan**: "다음에 뭘 해야 하는지" 실천 가이드 생성

#### F5. 학습 보고서 자동화
- 학부모용: 숫자가 아닌 "대화 거리" 중심
- 강사용: 학생별 현황 대시보드
- 카카오톡/문자로 자동 발송 옵션

### Phase 3: 관리 시스템

#### F6. 학원/학생 관리
- 학원 정보, 강사, 학생 등록
- 학교/지역 정보 연동 (Hyper-Local)
- 강사별 문제 세트/커리큘럼 저장 (노하우 시스템화)

#### F7. 기출/교과서 검색 (RAG)
- **용도**: 강사가 필요할 때 기출 문제, 교과서 내용, 수능/모의고사 검색
- **기술**: Gemini File Search API
- **데이터**: 주요 문제집, 교과서, 수능/모의고사
- **전처리**: PDF → 마크다운 변환 (표/수식 최적화), 스캔 PDF는 Vision 처리
- **UI**: 별도 검색 탭에서 키워드/단원으로 검색 → 결과 열람

---

## 🏗️ 기술 스택

| 영역 | 기술 |
|-----|-----|
| Frontend | Next.js 14 (App Router) |
| Backend | Next.js API Routes + Supabase |
| DB/Storage/Auth | Supabase |
| 문자 발송 | Tally |
| OCR + 풀이 분석 + 교육자료 인식 | Claude Vision (이미지 인식 + 분석 + 정리 통합) |
| PDF 변환 | PDF.co + @react-pdf/renderer |
| 문제 생성 | Claude API (Anthropic SDK) |
| 문제 검수 | Gemini / ChatGPT / Claude (멀티 셀렉트) |
| RAG | Gemini File Search API |
| 수식 렌더링 | KaTeX + react-katex |
| 기하 도형 시각화 | JSXGraph |
| 함수 그래프 시각화 | function-plot |
| 스키마 검증 | Zod |

---

## 📊 데이터 모델 (핵심 엔티티)
```
[academies] 학원 정보
[profiles] 사용자 프로필 (Supabase Auth 연동)
[teachers] 강사 정보
[students] 학생 정보
[classes] 반 정보
[class_students] 반-학생 연결
[schools] 학교 정보 (지역/학교별 맥락)
[problems] 문제 (생성된 문제 + 메타데이터 + Few-shot 샘플)
[problem_sets] 문제 세트 (과제/수업/시험별 문제 묶음)
[problem_set_items] 문제 세트-문제 연결
[assignments] 배포된 과제
[assignment_submissions] 학생 제출물
[attendance] 출석 기록
[consultations] 상담 기록
[notices] 공지사항
[grades] 성적 기록
[reports] 학습 보고서
```

---

## 🔄 핵심 플로우
```
[강사] 문제 조건 입력
    ↓
[AI] Gemini로 문제 생성
    ↓
[AI] 멀티 LLM 검수 (선택)
    ↓
[강사] 편집/승인
    ↓
[시스템] 문자 발송 (Tally)
    ↓
[학생] 문제 풀이 → 사진 업로드
    ↓
[AI] OCR → 채점 → 분석
    ↓
[시스템] 보고서 생성 → 학부모/강사 전달
```

---

## 📱 화면 구성 (MVP)

### 강사용
1. **대시보드**: 학생 현황, 최근 과제, 알림
2. **문제 생성**: 조건 입력 → AI 생성 → 편집 → 저장
3. **과제 배포**: 문제지 선택 → 학생 선택 → 문자 발송
4. **분석 리포트**: 학생별/반별 취약점, 성적 추이
5. **학생 관리**: 학생 정보, 학교, 학습 이력

### 학생용
1. **과제 목록**: 받은 과제, 제출 현황
2. **문제 풀이**: 문제 보기 → 풀이 업로드
3. **내 분석**: 취약 단원, 추천 학습

### 학부모용
1. **자녀 현황**: 학습 진도, 분석 요약
2. **보고서 열람**: 주간/월간 리포트
3. **알림 설정**: 문자/카톡 수신 설정

---

## 🎯 성공 지표 (KPI)

| 지표 | 목표 (3개월) |
|-----|------------|
| 학원 가입 수 | 50개 |
| 활성 강사 수 | 100명 |
| 월간 생성 문제 수 | 10,000문제 |
| 학생 제출률 | 70% 이상 |
| 강사 재사용률 | 주 3회 이상 접속 60% |

---

## 📅 개발 로드맵 (MVP)

| Phase | 기간 | 핵심 기능 |
|-------|-----|----------|
| **Phase 1** | 4주 | 인증, 학원/학생 관리, 문제 생성 기본 |
| **Phase 2** | 3주 | 문자 배포, 풀이 제출, OCR 연동 |
| **Phase 3** | 3주 | 자동 채점, 분석, 보고서 |
| **Phase 4** | 2주 | 테스트, 버그 수정, 런칭 준비 |

**총 MVP 개발 기간: 약 12주**

---

## ⚠️ 리스크 및 대응

| 리스크 | 대응 방안 |
|-------|----------|
| AI 문제 품질 불안정 | 멀티 LLM 검수 + 강사 편집 권한 강화 |
| OCR 인식률 | 전처리 강화 + 수동 입력 폴백 |
| 강사 온보딩 거부감 | Zero-Entry: 기존 도구(엑셀, 카톡) 연동 우선 |
| 학생 제출률 저조 | 알림 자동화 + 게이미피케이션 검토 |